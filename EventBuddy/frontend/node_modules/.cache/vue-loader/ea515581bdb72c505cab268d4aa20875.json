{"remainingRequest":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\src\\views\\EventEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\src\\views\\EventEditor.vue","mtime":1581548890576},{"path":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGFwaVNlcnZpY2UgfSBmcm9tICIuLi9jb21tb24vYXBpLnNlcnZpY2UiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJFdmVudEVkaXRvciIsCgogIHByb3BzOiB7CiAgICBzbHVnOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlIC8vc2x1ZyBvcHRpb25hbCBpbiBjYXNlIGlzIG5ldyBFdmVudAogICAgfSwKICAgIHByZXZpb3VzRXZlbnQ6IHsKICAgICAgLy90aGUgRXZlbnQgdG8gYmUgbW9kaWZ5CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9CiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGV2ZW50X3RpdGxlOiB0aGlzLnByZXZpb3VzRXZlbnQudGl0bGUgfHwgbnVsbCwKICAgICAgZXZlbnRfZGVzY3JpcHRpb246IHRoaXMucHJldmlvdXNFdmVudC5kZXNjcmlwdGlvbiB8fCBudWxsLAogICAgICBzdGFydF9kYXRlOiB0aGlzLnByZXZpb3VzRXZlbnQuc3RhcnRfZGF0ZSB8fCBudWxsLAogICAgICBldmVudF9sb2NhdGlvbjogdGhpcy5wcmV2aW91c0V2ZW50LmxvY2F0aW9uIHx8IG51bGwsCiAgICAgIGV2ZW50X3ByaWNlOiB0aGlzLnByZXZpb3VzRXZlbnQucHJpY2UgfHwgbnVsbCwKICAgICAgZXZlbnRfZ3JvdXBfbGltaXQ6IHRoaXMucHJldmlvdXNFdmVudC5ncm91cF9saW1pdCB8fCBudWxsLAogICAgICBlcnJvcjogbnVsbAogICAgfTsKICB9LAoKICAvL3RvIGZ1bGwgdGhlIGZpZWxkcyBmb3IgdGhlIGVkaXQgRXZlbnQKICBhc3luYyBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICAvL2lmIHNsdWcgZXhpc3QKICAgIGlmICh0by5wYXJhbXMuc2x1ZyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL2V2ZW50cy8ke3RvLnBhcmFtcy5zbHVnfS9gOwogICAgICBhd2FpdCBhcGlTZXJ2aWNlKGVuZHBvaW50KS50aGVuKGRhdGEgPT4gewogICAgICAgIHRvLnBhcmFtcy5wcmV2aW91c0V2ZW50ID0gZGF0YTsKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gbmV4dCgpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIG9uU3VibWl0KCkgewogICAgICAvL2NoZWNrIHRpdGxlIGZpZWxkCiAgICAgIGlmICghdGhpcy5ldmVudF90aXRsZSkgewogICAgICAgIHRoaXMuZXJyb3IgPSAiSWwgY2FtcG8gdGl0b2xvIG5vbiBwdcOyIGVzc2VyZSB2dW90byEiOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZXZlbnRfdGl0bGUubGVuZ3RoID4gMjQwKSB7CiAgICAgICAgdGhpcy5lcnJvciA9ICJOb24gc3VwZXJhcmUgaSAyNDAgY2FyYXR0ZXJpIHBlciBpbCB0aXRvbG8iOwogICAgICAgIC8vY2hlY2sgZGVzY3JpcHRpb24gZmllbGQKICAgICAgfSBlbHNlIGlmICghdGhpcy5ldmVudF9kZXNjcmlwdGlvbikgewogICAgICAgIHRoaXMuZXJyb3IgPSAiSWwgY2FtcG8gZGVzY3JpemlvbmUgbm9uIHB1w7IgZXNzZXJlIHZ1b3RvISI7CiAgICAgICAgLy9jaGVjayBsb2NhdGlvbiBmaWVsZAogICAgICB9IGVsc2UgaWYgKCF0aGlzLmV2ZW50X2xvY2F0aW9uKSB7CiAgICAgICAgdGhpcy5lcnJvciA9ICJJbCBjYW1wbyBjaXR0w6Agbm9uIHB1w7IgZXNzZXJlIHZ1b3RvISI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5ldmVudF9sb2NhdGlvbi5sZW5ndGggPiA0MCkgewogICAgICAgIHRoaXMuZXJyb3IgPSAiTm9uIHN1cGVyYXJlIGkgNDAgY2FyYXR0ZXJpIHBlciBsYSBjaXR0w6AiOwogICAgICAgIC8vZ2V0IHRoZSBlbmRwb2ludCBhbmQgdGhlIG1ldGhvZCBvZiB0aGUgQVBJL2V2ZW50cwogICAgICB9IGVsc2UgewogICAgICAgIGxldCBlbmRwb2ludCA9ICIvYXBpL2V2ZW50cy8iOwogICAgICAgIGxldCBtZXRob2QgPSAiUE9TVCI7CiAgICAgICAgLy8gaW4gY2FzZSBtb2RpZnkgRXZlbnQKICAgICAgICBpZiAodGhpcy5wcmV2aW91c0V2ZW50KSB7CiAgICAgICAgICBtZXRob2QgPSAiUFVUIjsKICAgICAgICAgIGVuZHBvaW50ICs9IGAke3RoaXMuc2x1Z30vYDsKICAgICAgICB9CiAgICAgICAgLy9jYWxsIHRoZSBzZXJ2aWNlIGZvciB0aGUgcmVxdWVzdCBhbmQgdGhlbi4uCiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgbWV0aG9kLCB7CiAgICAgICAgICB0aXRsZTogdGhpcy5ldmVudF90aXRsZSwKICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmV2ZW50X2Rlc2NyaXB0aW9uLAogICAgICAgICAgc3RhcnRfZGF0ZTogdGhpcy5zdGFydF9kYXRlLAogICAgICAgICAgbG9jYXRpb246IHRoaXMuZXZlbnRfbG9jYXRpb24sCiAgICAgICAgICBwcmljZTogdGhpcy5ldmVudF9wcmljZSwKICAgICAgICAgIGdyb3VwX2xpbWl0OiB0aGlzLmV2ZW50X2dyb3VwX2xpbWl0CiAgICAgICAgfSkudGhlbihldmVudF9kYXRhID0+IHsKICAgICAgICAgIC8vcmVkaXJlY3Qgcm91dGVyIHRvIHRoZSBldmVudCBkZXNjcmlwdGlvbgogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAiZXZlbnQiLAogICAgICAgICAgICBwYXJhbXM6IHsgc2x1ZzogZXZlbnRfZGF0YS5zbHVnIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGRvY3VtZW50LnRpdGxlID0gIkVkaXRvciAtIEV2ZW50QnVkZHkiOwogIH0KfTsK"},{"version":3,"sources":["EventEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"EventEditor.vue","sourceRoot":"src/views","sourcesContent":["<!--Event: If Add a new Event-->\n<template >\n  <div class=\"container mt-2\">\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <h1 class=\"mb-3\">Aggiungi un evento</h1>\n        <form @submit.prevent=\"onSubmit\">\n          <!--@ onSubmit.prevent = prevent the page to reload  -->\n          <textarea\n            v-model=\"event_title\"\n            class=\"form-control\"\n            placeholder=\"Quale è il titolo?\"\n            rows=\"1\"\n          >\n                    </textarea>\n          <textarea\n            v-model=\"event_description\"\n            class=\"form-control\"\n            placeholder=\"Descrizione\"\n            rows=\"4\"\n          >\n                    </textarea>\n          <textarea\n            v-model=\"event_location\"\n            class=\"form-control\"\n            placeholder=\"Città\"\n            rows=\"1\"\n          >\n                    </textarea>\n          <div class=\"date-time-control\">\n            <p>Data e ora evento</p>\n            <input\n              type=\"datetime-local\"\n              id=\"event-time\"\n              name=\"event-time\"\n              v-model=\"start_date\"\n              value=\"\"\n              required\n            >\n          </div>\n          <div class=\"price-control\">\n            <p>Prezzo</p>\n            <input\n              type=\"number\"\n              step=\"0.1\"\n              v-model=\"event_price\"\n              class=\"form-control\"\n              placeholder=\"0.0\"\n            >\n          </div>\n          <div class=\"group-size-control\">\n            <p>Dimensione gruppo</p>\n            <input\n              type=\"number\"\n              step=\"1\"\n              v-model=\"event_group_limit\"\n              class=\"form-control\"\n              placeholder=\"0\"\n            >\n          </div>\n          <br>\n          <button\n            class=\"btn btn-success\"\n            type=\"submit\"\n          >Pubblica Evento\n          </button>\n        </form>\n        <p class=\"error mt-2\">{{ error }}</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { apiService } from \"../common/api.service\";\n\nexport default {\n  name: \"EventEditor\",\n\n  props: {\n    slug: {\n      type: String,\n      required: false //slug optional in case is new Event\n    },\n    previousEvent: {\n      //the Event to be modify\n      type: String,\n      required: false\n    }\n  },\n\n  data() {\n    return {\n      event_title: this.previousEvent.title || null,\n      event_description: this.previousEvent.description || null,\n      start_date: this.previousEvent.start_date || null,\n      event_location: this.previousEvent.location || null,\n      event_price: this.previousEvent.price || null,\n      event_group_limit: this.previousEvent.group_limit || null,\n      error: null\n    };\n  },\n\n  //to full the fields for the edit Event\n  async beforeRouteEnter(to, from, next) {\n    //if slug exist\n    if (to.params.slug !== undefined) {\n      let endpoint = `/api/events/${to.params.slug}/`;\n      await apiService(endpoint).then(data => {\n        to.params.previousEvent = data;\n      });\n    }\n    return next();\n  },\n\n  methods: {\n    onSubmit() {\n      //check title field\n      if (!this.event_title) {\n        this.error = \"Il campo titolo non può essere vuoto!\";\n      } else if (this.event_title.length > 240) {\n        this.error = \"Non superare i 240 caratteri per il titolo\";\n        //check description field\n      } else if (!this.event_description) {\n        this.error = \"Il campo descrizione non può essere vuoto!\";\n        //check location field\n      } else if (!this.event_location) {\n        this.error = \"Il campo città non può essere vuoto!\";\n      } else if (this.event_location.length > 40) {\n        this.error = \"Non superare i 40 caratteri per la città\";\n        //get the endpoint and the method of the API/events\n      } else {\n        let endpoint = \"/api/events/\";\n        let method = \"POST\";\n        // in case modify Event\n        if (this.previousEvent) {\n          method = \"PUT\";\n          endpoint += `${this.slug}/`;\n        }\n        //call the service for the request and then..\n        apiService(endpoint, method, {\n          title: this.event_title,\n          description: this.event_description,\n          start_date: this.start_date,\n          location: this.event_location,\n          price: this.event_price,\n          group_limit: this.event_group_limit\n        }).then(event_data => {\n          //redirect router to the event description\n          this.$router.push({\n            name: \"event\",\n            params: { slug: event_data.slug }\n          });\n        });\n      }\n    }\n  },\n\n  created() {\n    document.title = \"Editor - EventBuddy\";\n  }\n};\n</script>\n"]}]}