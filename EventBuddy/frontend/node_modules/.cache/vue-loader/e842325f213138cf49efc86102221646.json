{"remainingRequest":"D:\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Progetto Finale\\EventBuddy\\frontend\\src\\components\\Review.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Progetto Finale\\EventBuddy\\frontend\\src\\components\\Review.vue","mtime":1581589584000},{"path":"D:\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGFwaVNlcnZpY2UgfSBmcm9tICIuLi9jb21tb24vYXBpLnNlcnZpY2UuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJldmlld0NvbXBvbmVudCIsCiAgcHJvcHM6IHsKICAgIHJldmlldzogewogICAgICB0eXBlOiBPYmplY3QsIC8vYSBzcGVjaWZpYyBSZXZpZXcKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICByZXF1ZXN0VXNlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlckxpa2VkUmV2aWV3OiB0aGlzLnJldmlldy51c2VyX2hhc192b3RlZCwKICAgICAgbGlrZXNOdW1iZXI6IHRoaXMucmV2aWV3Lmxpa2VzX2NvdW50CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzUmV2aWV3QXV0aG9yKCkgewogICAgICByZXR1cm4gdGhpcy5yZXZpZXcuYXV0aG9yID09PSB0aGlzLnJlcXVlc3RVc2VyOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdG9nZ2xlTGlrZSgpIHsKICAgICAgdGhpcy51c2VyTGlrZWRSZXZpZXcgPT0gZmFsc2UgPyB0aGlzLmxpa2VSZXZpZXcoKSA6IHRoaXMudW5MaWtlUmV2aWV3KCk7CiAgICB9LAogICAgbGlrZVJldmlldygpIHsKICAgICAgdGhpcy51c2VyTGlrZWRSZXZpZXcgPSB0cnVlOwogICAgICB0aGlzLmxpa2VzTnVtYmVyICs9IDE7CiAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3Jldmlld3MvJHt0aGlzLnJldmlldy5pZH0vbGlrZS9gOwogICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiUE9TVCIpOwogICAgfSwKICAgIHVuTGlrZVJldmlldygpIHsKICAgICAgdGhpcy51c2VyTGlrZWRSZXZpZXcgPSBmYWxzZTsKICAgICAgdGhpcy5saWtlc051bWJlciAtPSAxOwogICAgICBsZXQgZW5kcG9pbnQgPSBgL2FwaS9yZXZpZXdzLyR7dGhpcy5yZXZpZXcuaWR9L2xpa2UvYDsKICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIkRFTEVURSIpOwogICAgfSwKICAgIHRyaWdnZXJEZWxldGVSZXZpZXcoKSB7CiAgICAgIC8vb24gcHJlc3MgZGVsZXRlLWJ0biwgdGhpcyBtZXRob2QgaXMgZW1pdHRlZCBpbiB0aGUgcGFyZW50IGNvbXBvbmVudCAoRXZlbnQpCiAgICAgIHRoaXMuJGVtaXQoImRlbGV0ZS1yZXZpZXciLCB0aGlzLnJldmlldyk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Review.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Review.vue","sourceRoot":"src/components","sourcesContent":["<!--to do : list: /api/events/slug/reviews/ imported in UserProfile.vue (not UserEditor.vue) only if user_event_owner and event_has_expired (conviene fare APILIST per event_expired_reviews?) -->\n<!-- ReviewEditor imported in EventEditor only if event_has_expired and i partecipated to event-->\n\n<!-------------------Single Review: Delete and Modify buttons --------------->\n<!------------------ methods:  data(), triggerDeleteReview(),  likeReview()-->\n\n <template lang=\"html\"> \n    <div class=\"single-review\">\n        <p class=\"text-muted\">\n            <strong>{{ review.author }}</strong> ha risposto il {{ review.created_at }}\n        </p>\n        <p>{{ review.body }}</p>\n        <div v-if=\"isReviewAuthor\" class=\"review-owner\">\n            <router-link\n                :to=\"{ name: 'review-editor', params: { id: review.id } }\"\n                class=\"btn btn-sm btn-outline-secondary mr-1\"\n                > <span>Modifica</span>\n            </router-link>\n \n            <button\n                class=\"btn btn-sm btn-outline-danger\"\n                @click=\"triggerDeleteReview\"\n                >Cancella\n            </button>\n        </div>\n       <div v-else class=\"like-review\">\n            <button\n                class=\"btn btn-sm\"\n                @click=\"toggleLike\"\n                :class=\"{\n                    'btn-primary': userLikedReview,\n                    'btn-outline-primary': !userLikedReview,\n                    }\">\n                <strong>Like [{{ likesNumber }}]</strong>\n            </button>\n        </div>\n        <hr>\n    </div>\n</template>\n\n<script>\nimport { apiService } from \"../common/api.service.js\";\nexport default {\n  name: \"ReviewComponent\",\n  props: {\n    review: {\n      type: Object, //a specific Review\n      required: true\n    },\n    requestUser: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      userLikedReview: this.review.user_has_voted,\n      likesNumber: this.review.likes_count\n    };\n  },\n  computed: {\n    isReviewAuthor() {\n      return this.review.author === this.requestUser;\n    }\n  },\n  methods: {\n    toggleLike() {\n      this.userLikedReview == false ? this.likeReview() : this.unLikeReview();\n    },\n    likeReview() {\n      this.userLikedReview = true;\n      this.likesNumber += 1;\n      let endpoint = `/api/reviews/${this.review.id}/like/`;\n      apiService(endpoint, \"POST\");\n    },\n    unLikeReview() {\n      this.userLikedReview = false;\n      this.likesNumber -= 1;\n      let endpoint = `/api/reviews/${this.review.id}/like/`;\n      apiService(endpoint, \"DELETE\");\n    },\n    triggerDeleteReview() {\n      //on press delete-btn, this method is emitted in the parent component (Event)\n      this.$emit(\"delete-review\", this.review);\n    }\n  }\n};\n</script>\n\n<style lang=\"css\">\n</style>\n"]}]}