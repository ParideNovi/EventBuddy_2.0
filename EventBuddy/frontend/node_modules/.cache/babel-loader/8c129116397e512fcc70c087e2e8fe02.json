{"remainingRequest":"Z:\\EventBuddy-master\\EventBuddy\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!Z:\\EventBuddy-master\\EventBuddy\\frontend\\node_modules\\babel-loader\\lib\\index.js!Z:\\EventBuddy-master\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!Z:\\EventBuddy-master\\EventBuddy\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!Z:\\EventBuddy-master\\EventBuddy\\frontend\\src\\components\\ReviewEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"Z:\\EventBuddy-master\\EventBuddy\\frontend\\src\\components\\ReviewEditor.vue","mtime":1581788768000},{"path":"Z:\\EventBuddy-master\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"Z:\\EventBuddy-master\\EventBuddy\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"Z:\\EventBuddy-master\\EventBuddy\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"Z:\\EventBuddy-master\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"Z:\\EventBuddy-master\\EventBuddy\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiWjpcXEV2ZW50QnVkZHktbWFzdGVyXFxFdmVudEJ1ZGR5XFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGFwaVNlcnZpY2UgfSBmcm9tICIuLi9jb21tb24vYXBpLnNlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJldmlld0VkaXRvciIsCiAgcHJvcHM6IHsKICAgIGlkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBldmVudFNsdWc6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIC8vIGZpZWxkcyBhdXRvZmlsbGVkIGJlZm9yZVJvdXRlRW50ZXIKICAgIHByZXZpb3VzUmV2aWV3Qm9keTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgcHJldmlvdXNSZXZpZXdSYXRpbmc6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgYmVmb3JlUm91dGVFbnRlcjogZnVuY3Rpb24gYmVmb3JlUm91dGVFbnRlcih0bywgZnJvbSwgbmV4dCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGVuZHBvaW50OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgLy8gZ2V0IHByZXZpb3VzUmV2aWV3Qm9keSgke3RvLnBhcmFtcy5pZH0pCiAgICAgICAgICAgICAgLy8gaXQgY291bGQgYmUgYWxzbyBtYWRlIHdpdGggbWV0aG9kICsgY3JlYXRlZCAobGlmZSBjeWNsZSBob29rKQogICAgICAgICAgICAgIC8vIGJ1dCB0aGlzIHdvcmtzIGJldHRlciB3aXRoIGhlYXZ5IGZpbGVzIChpbWFnZXMpCiAgICAgICAgICAgICAgZW5kcG9pbnQgPSAiL2FwaS9yZXZpZXdzLyIuY29uY2F0KHRvLnBhcmFtcy5pZCwgIi8iKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gYXBpU2VydmljZShlbmRwb2ludCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgLy8gZ2V0IGFsbCB0aGUgcHJldmlvdXNEYXRhCiAgICAgICAgICAgICAgICB0by5wYXJhbXMucHJldmlvdXNSZXZpZXdCb2R5ID0gZGF0YS5ib2R5OwogICAgICAgICAgICAgICAgdG8ucGFyYW1zLnByZXZpb3VzUmV2aWV3UmF0aW5nID0gZGF0YS5yYXRpbmc7CiAgICAgICAgICAgICAgICB0by5wYXJhbXMuZXZlbnRTbHVnID0gZGF0YS5ldmVudF9zbHVnOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5leHQoKSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmV2aWV3Qm9keTogdGhpcy5wcmV2aW91c1Jldmlld0JvZHksCiAgICAgIC8vcmV0dXJuIHRoZSBtb2RpZmllZCByZXZpZXcKICAgICAgcmV2aWV3UmF0aW5nOiB0aGlzLnByZXZpb3VzUmV2aWV3UmF0aW5nLAogICAgICBlcnJvcjogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIGlmIHRoZSBmaWVsZCBjb250YWlucyBzb21ldGhpbmcKICAgICAgaWYgKHRoaXMucmV2aWV3Qm9keSkgewogICAgICAgIHZhciBlbmRwb2ludCA9ICIvYXBpL3Jldmlld3MvIi5jb25jYXQodGhpcy5pZCwgIi8iKTsKICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCAiUFVUIiwgewogICAgICAgICAgYm9keTogdGhpcy5yZXZpZXdCb2R5LAogICAgICAgICAgcmF0aW5nOiB0aGlzLnJldmlld1JhdGluZwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogImV2ZW50IiwKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgc2x1ZzogX3RoaXMuZXZlbnRTbHVnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyb3IgPSAiSWwgY2FtcG8gUmVjZW5zaW9uZSBub24gcHXDsiBlc3NlcmUgdnVvdG8hIjsKICAgICAgfQogICAgfQogIH0gLy8gbWV0aG9kczogewogIC8vICAgICBhc3luYyBnZXRSZXZpZXdEYXRhKCkgewogIC8vICAgICAgICAgbGV0IGVuZHBvaW50ID0gYC9hcGkvcmV2aWV3cy8ke3RoaXMuaWR9L2A7CiAgLy8gICAgICAgICBhd2FpdCBhcGlTZXJ2aWNlKGVuZHBvaW50KQogIC8vICAgICAgICAgICAgICAgICAudGhlbihkYXRhID0+IHsKICAvLyAgICAgICAgICAgICAgICAgICAgIHRoaXMucmV2aWV3Qm9keSA9IGRhdGEuYm9keTsKICAvLyAgICAgICAgICAgICAgICAgfSkKICAvLyAgICAgfQogIC8vIH0sCiAgLy8gY3JlYXRlZCgpIHsKICAvLyAgICAgdGhpcy5nZXRSZXZpZXdEYXRhKCk7CiAgLy8gfQoKfTs="},{"version":3,"sources":["ReviewEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,SAAA,UAAA,QAAA,uBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KALA;AASA;AACA,IAAA,kBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAVA;AAcA,IAAA,oBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AAdA,GAHA;AAuBA,EAAA,gBAvBA,4BAuBA,EAvBA,EAuBA,IAvBA,EAuBA,IAvBA,EAuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,cAAA,QAJA,0BAIA,EAAA,CAAA,MAAA,CAAA,EAJA;AAAA;AAAA,qBAKA,UAAA,CAAA,QAAA,CAAA,CAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA;AACA,gBAAA,EAAA,CAAA,MAAA,CAAA,kBAAA,GAAA,IAAA,CAAA,IAAA;AACA,gBAAA,EAAA,CAAA,MAAA,CAAA,oBAAA,GAAA,IAAA,CAAA,MAAA;AACA,gBAAA,EAAA,CAAA,MAAA,CAAA,SAAA,GAAA,IAAA,CAAA,UAAA;AACA,eALA,CALA;;AAAA;AAAA,+CAWA,IAAA,EAXA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA,GAnCA;AAqCA,EAAA,IArCA,kBAqCA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KAAA,kBADA;AACA;AACA,MAAA,YAAA,EAAA,KAAA,oBAFA;AAGA,MAAA,KAAA,EAAA;AAHA,KAAA;AAKA,GA3CA;AA4CA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA;AACA,UAAA,KAAA,UAAA,EAAA;AACA,YAAA,QAAA,0BAAA,KAAA,EAAA,MAAA;AACA,QAAA,UAAA,CAAA,QAAA,EAAA,KAAA,EAAA;AACA,UAAA,IAAA,EAAA,KAAA,UADA;AAEA,UAAA,MAAA,EAAA,KAAA;AAFA,SAAA,CAAA,CAGA,IAHA,CAGA,YAAA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA,OADA;AAEA,YAAA,MAAA,EAAA;AAAA,cAAA,IAAA,EAAA,KAAA,CAAA;AAAA;AAFA,WAAA;AAIA,SARA;AASA,OAXA,MAWA;AACA,aAAA,KAAA,GAAA,2CAAA;AACA;AACA;AAjBA,GA5CA,CA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA1EA,CAAA","sourcesContent":["<!------------------ Single Review: Modify form ----------------------------->\n<!------------------ methods: beforeRouteEnter data(), onSubmit()----------->\n\n<template lang=\"html\">\n  <div class=\"container mt-2\">\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <h1 class=\"mb-3\">Modifica la tua recensione</h1>\n        <form @submit.prevent=\"onSubmit\">\n          <!--textarea with previous Review-->\n          <textarea v-model=\"reviewBody\" class=\"form-control\" rows=\"3\">\n          </textarea>\n          <!--rating-->\n          <br />\n          <button class=\"btn btn-success\" type=\"submit\">\n            Pubblica la Recensione\n          </button>\n        </form>\n        <p class=\"error mt-2\">{{ error }}</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { apiService } from \"../common/api.service\";\n\nexport default {\n  name: \"ReviewEditor\",\n\n  props: {\n    id: {\n      type: Number,\n      required: true\n    },\n    eventSlug: {\n      type: String,\n      required: true\n    },\n    // fields autofilled beforeRouteEnter\n    previousReviewBody: {\n      type: String,\n      required: true\n    },\n    previousReviewRating: {\n      type: Number,\n      required: true\n    }\n  },\n\n  async beforeRouteEnter(to, from, next) {\n    // get previousReviewBody(${to.params.id})\n    // it could be also made with method + created (life cycle hook)\n    // but this works better with heavy files (images)\n    let endpoint = `/api/reviews/${to.params.id}/`;\n    await apiService(endpoint).then(data => {\n      // get all the previousData\n      to.params.previousReviewBody = data.body;\n      to.params.previousReviewRating = data.rating;\n      to.params.eventSlug = data.event_slug;\n    });\n    return next();\n  },\n\n  data() {\n    return {\n      reviewBody: this.previousReviewBody, //return the modified review\n      reviewRating: this.previousReviewRating,\n      error: null\n    };\n  },\n  methods: {\n    onSubmit() {\n      // if the field contains something\n      if (this.reviewBody) {\n        let endpoint = `/api/reviews/${this.id}/`;\n        apiService(endpoint, \"PUT\", {\n          body: this.reviewBody,\n          rating: this.reviewRating\n        }).then(() => {\n          this.$router.push({\n            name: \"event\",\n            params: { slug: this.eventSlug }\n          });\n        });\n      } else {\n        this.error = \"Il campo Recensione non puÃ² essere vuoto!\";\n      }\n    }\n  }\n  // methods: {\n  //     async getReviewData() {\n  //         let endpoint = `/api/reviews/${this.id}/`;\n  //         await apiService(endpoint)\n  //                 .then(data => {\n  //                     this.reviewBody = data.body;\n  //                 })\n  //     }\n  // },\n  // created() {\n  //     this.getReviewData();\n  // }\n};\n</script>\n"],"sourceRoot":"src/components"}]}