{"remainingRequest":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\src\\views\\EventEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\src\\views\\EventEditor.vue","mtime":1581548890576},{"path":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Paride\\OneDrive - Politecnico di Milano\\progetto\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxQYXJpZGVcXE9uZURyaXZlIC0gUG9saXRlY25pY28gZGkgTWlsYW5vXFxwcm9nZXR0b1xcUHJvZ2V0dG8gRmluYWxlXFxFdmVudEJ1ZGR5XFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGFwaVNlcnZpY2UgfSBmcm9tICIuLi9jb21tb24vYXBpLnNlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkV2ZW50RWRpdG9yIiwKICBwcm9wczogewogICAgc2x1ZzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSAvL3NsdWcgb3B0aW9uYWwgaW4gY2FzZSBpcyBuZXcgRXZlbnQKCiAgICB9LAogICAgcHJldmlvdXNFdmVudDogewogICAgICAvL3RoZSBFdmVudCB0byBiZSBtb2RpZnkKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBldmVudF90aXRsZTogdGhpcy5wcmV2aW91c0V2ZW50LnRpdGxlIHx8IG51bGwsCiAgICAgIGV2ZW50X2Rlc2NyaXB0aW9uOiB0aGlzLnByZXZpb3VzRXZlbnQuZGVzY3JpcHRpb24gfHwgbnVsbCwKICAgICAgc3RhcnRfZGF0ZTogdGhpcy5wcmV2aW91c0V2ZW50LnN0YXJ0X2RhdGUgfHwgbnVsbCwKICAgICAgZXZlbnRfbG9jYXRpb246IHRoaXMucHJldmlvdXNFdmVudC5sb2NhdGlvbiB8fCBudWxsLAogICAgICBldmVudF9wcmljZTogdGhpcy5wcmV2aW91c0V2ZW50LnByaWNlIHx8IG51bGwsCiAgICAgIGV2ZW50X2dyb3VwX2xpbWl0OiB0aGlzLnByZXZpb3VzRXZlbnQuZ3JvdXBfbGltaXQgfHwgbnVsbCwKICAgICAgZXJyb3I6IG51bGwKICAgIH07CiAgfSwKICAvL3RvIGZ1bGwgdGhlIGZpZWxkcyBmb3IgdGhlIGVkaXQgRXZlbnQKICBiZWZvcmVSb3V0ZUVudGVyOiBmdW5jdGlvbiBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgZW5kcG9pbnQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoISh0by5wYXJhbXMuc2x1ZyAhPT0gdW5kZWZpbmVkKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGVuZHBvaW50ID0gIi9hcGkvZXZlbnRzLyIuY29uY2F0KHRvLnBhcmFtcy5zbHVnLCAiLyIpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBhcGlTZXJ2aWNlKGVuZHBvaW50KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICB0by5wYXJhbXMucHJldmlvdXNFdmVudCA9IGRhdGE7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV4dCgpKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vY2hlY2sgdGl0bGUgZmllbGQKICAgICAgaWYgKCF0aGlzLmV2ZW50X3RpdGxlKSB7CiAgICAgICAgdGhpcy5lcnJvciA9ICJJbCBjYW1wbyB0aXRvbG8gbm9uIHB1w7IgZXNzZXJlIHZ1b3RvISI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5ldmVudF90aXRsZS5sZW5ndGggPiAyNDApIHsKICAgICAgICB0aGlzLmVycm9yID0gIk5vbiBzdXBlcmFyZSBpIDI0MCBjYXJhdHRlcmkgcGVyIGlsIHRpdG9sbyI7IC8vY2hlY2sgZGVzY3JpcHRpb24gZmllbGQKICAgICAgfSBlbHNlIGlmICghdGhpcy5ldmVudF9kZXNjcmlwdGlvbikgewogICAgICAgIHRoaXMuZXJyb3IgPSAiSWwgY2FtcG8gZGVzY3JpemlvbmUgbm9uIHB1w7IgZXNzZXJlIHZ1b3RvISI7IC8vY2hlY2sgbG9jYXRpb24gZmllbGQKICAgICAgfSBlbHNlIGlmICghdGhpcy5ldmVudF9sb2NhdGlvbikgewogICAgICAgIHRoaXMuZXJyb3IgPSAiSWwgY2FtcG8gY2l0dMOgIG5vbiBwdcOyIGVzc2VyZSB2dW90byEiOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZXZlbnRfbG9jYXRpb24ubGVuZ3RoID4gNDApIHsKICAgICAgICB0aGlzLmVycm9yID0gIk5vbiBzdXBlcmFyZSBpIDQwIGNhcmF0dGVyaSBwZXIgbGEgY2l0dMOgIjsgLy9nZXQgdGhlIGVuZHBvaW50IGFuZCB0aGUgbWV0aG9kIG9mIHRoZSBBUEkvZXZlbnRzCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGVuZHBvaW50ID0gIi9hcGkvZXZlbnRzLyI7CiAgICAgICAgdmFyIG1ldGhvZCA9ICJQT1NUIjsgLy8gaW4gY2FzZSBtb2RpZnkgRXZlbnQKCiAgICAgICAgaWYgKHRoaXMucHJldmlvdXNFdmVudCkgewogICAgICAgICAgbWV0aG9kID0gIlBVVCI7CiAgICAgICAgICBlbmRwb2ludCArPSAiIi5jb25jYXQodGhpcy5zbHVnLCAiLyIpOwogICAgICAgIH0gLy9jYWxsIHRoZSBzZXJ2aWNlIGZvciB0aGUgcmVxdWVzdCBhbmQgdGhlbi4uCgoKICAgICAgICBhcGlTZXJ2aWNlKGVuZHBvaW50LCBtZXRob2QsIHsKICAgICAgICAgIHRpdGxlOiB0aGlzLmV2ZW50X3RpdGxlLAogICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZXZlbnRfZGVzY3JpcHRpb24sCiAgICAgICAgICBzdGFydF9kYXRlOiB0aGlzLnN0YXJ0X2RhdGUsCiAgICAgICAgICBsb2NhdGlvbjogdGhpcy5ldmVudF9sb2NhdGlvbiwKICAgICAgICAgIHByaWNlOiB0aGlzLmV2ZW50X3ByaWNlLAogICAgICAgICAgZ3JvdXBfbGltaXQ6IHRoaXMuZXZlbnRfZ3JvdXBfbGltaXQKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChldmVudF9kYXRhKSB7CiAgICAgICAgICAvL3JlZGlyZWN0IHJvdXRlciB0byB0aGUgZXZlbnQgZGVzY3JpcHRpb24KICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICJldmVudCIsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHNsdWc6IGV2ZW50X2RhdGEuc2x1ZwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGRvY3VtZW50LnRpdGxlID0gIkVkaXRvciAtIEV2ZW50QnVkZHkiOwogIH0KfTs="},{"version":3,"sources":["EventEditor.vue"],"names":[],"mappings":"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","sourcesContent":["<!--Event: If Add a new Event-->\n<template >\n  <div class=\"container mt-2\">\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <h1 class=\"mb-3\">Aggiungi un evento</h1>\n        <form @submit.prevent=\"onSubmit\">\n          <!--@ onSubmit.prevent = prevent the page to reload  -->\n          <textarea\n            v-model=\"event_title\"\n            class=\"form-control\"\n            placeholder=\"Quale è il titolo?\"\n            rows=\"1\"\n          >\n                    </textarea>\n          <textarea\n            v-model=\"event_description\"\n            class=\"form-control\"\n            placeholder=\"Descrizione\"\n            rows=\"4\"\n          >\n                    </textarea>\n          <textarea\n            v-model=\"event_location\"\n            class=\"form-control\"\n            placeholder=\"Città\"\n            rows=\"1\"\n          >\n                    </textarea>\n          <div class=\"date-time-control\">\n            <p>Data e ora evento</p>\n            <input\n              type=\"datetime-local\"\n              id=\"event-time\"\n              name=\"event-time\"\n              v-model=\"start_date\"\n              value=\"\"\n              required\n            >\n          </div>\n          <div class=\"price-control\">\n            <p>Prezzo</p>\n            <input\n              type=\"number\"\n              step=\"0.1\"\n              v-model=\"event_price\"\n              class=\"form-control\"\n              placeholder=\"0.0\"\n            >\n          </div>\n          <div class=\"group-size-control\">\n            <p>Dimensione gruppo</p>\n            <input\n              type=\"number\"\n              step=\"1\"\n              v-model=\"event_group_limit\"\n              class=\"form-control\"\n              placeholder=\"0\"\n            >\n          </div>\n          <br>\n          <button\n            class=\"btn btn-success\"\n            type=\"submit\"\n          >Pubblica Evento\n          </button>\n        </form>\n        <p class=\"error mt-2\">{{ error }}</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { apiService } from \"../common/api.service\";\n\nexport default {\n  name: \"EventEditor\",\n\n  props: {\n    slug: {\n      type: String,\n      required: false //slug optional in case is new Event\n    },\n    previousEvent: {\n      //the Event to be modify\n      type: String,\n      required: false\n    }\n  },\n\n  data() {\n    return {\n      event_title: this.previousEvent.title || null,\n      event_description: this.previousEvent.description || null,\n      start_date: this.previousEvent.start_date || null,\n      event_location: this.previousEvent.location || null,\n      event_price: this.previousEvent.price || null,\n      event_group_limit: this.previousEvent.group_limit || null,\n      error: null\n    };\n  },\n\n  //to full the fields for the edit Event\n  async beforeRouteEnter(to, from, next) {\n    //if slug exist\n    if (to.params.slug !== undefined) {\n      let endpoint = `/api/events/${to.params.slug}/`;\n      await apiService(endpoint).then(data => {\n        to.params.previousEvent = data;\n      });\n    }\n    return next();\n  },\n\n  methods: {\n    onSubmit() {\n      //check title field\n      if (!this.event_title) {\n        this.error = \"Il campo titolo non può essere vuoto!\";\n      } else if (this.event_title.length > 240) {\n        this.error = \"Non superare i 240 caratteri per il titolo\";\n        //check description field\n      } else if (!this.event_description) {\n        this.error = \"Il campo descrizione non può essere vuoto!\";\n        //check location field\n      } else if (!this.event_location) {\n        this.error = \"Il campo città non può essere vuoto!\";\n      } else if (this.event_location.length > 40) {\n        this.error = \"Non superare i 40 caratteri per la città\";\n        //get the endpoint and the method of the API/events\n      } else {\n        let endpoint = \"/api/events/\";\n        let method = \"POST\";\n        // in case modify Event\n        if (this.previousEvent) {\n          method = \"PUT\";\n          endpoint += `${this.slug}/`;\n        }\n        //call the service for the request and then..\n        apiService(endpoint, method, {\n          title: this.event_title,\n          description: this.event_description,\n          start_date: this.start_date,\n          location: this.event_location,\n          price: this.event_price,\n          group_limit: this.event_group_limit\n        }).then(event_data => {\n          //redirect router to the event description\n          this.$router.push({\n            name: \"event\",\n            params: { slug: event_data.slug }\n          });\n        });\n      }\n    }\n  },\n\n  created() {\n    document.title = \"Editor - EventBuddy\";\n  }\n};\n</script>\n"],"sourceRoot":"src/views"}]}