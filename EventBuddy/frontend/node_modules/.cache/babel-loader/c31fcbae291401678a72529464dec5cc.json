{"remainingRequest":"C:\\Users\\Paride\\Desktop\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Paride\\Desktop\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Paride\\Desktop\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Paride\\Desktop\\Progetto Finale\\EventBuddy\\frontend\\src\\components\\ReviewEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Paride\\Desktop\\Progetto Finale\\EventBuddy\\frontend\\src\\components\\ReviewEditor.vue","mtime":1581788768000},{"path":"C:\\Users\\Paride\\Desktop\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Paride\\Desktop\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Paride\\Desktop\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Paride\\Desktop\\Progetto Finale\\EventBuddy\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxQYXJpZGVcXERlc2t0b3BcXFByb2dldHRvIEZpbmFsZVxcRXZlbnRCdWRkeVxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBhcGlTZXJ2aWNlIH0gZnJvbSAiLi4vY29tbW9uL2FwaS5zZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZXZpZXdFZGl0b3IiLAogIHByb3BzOiB7CiAgICBpZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgZXZlbnRTbHVnOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICAvLyBmaWVsZHMgYXV0b2ZpbGxlZCBiZWZvcmVSb3V0ZUVudGVyCiAgICBwcmV2aW91c1Jldmlld0JvZHk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHByZXZpb3VzUmV2aWV3UmF0aW5nOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGJlZm9yZVJvdXRlRW50ZXI6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBlbmRwb2ludDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIC8vIGdldCBwcmV2aW91c1Jldmlld0JvZHkoJHt0by5wYXJhbXMuaWR9KQogICAgICAgICAgICAgIC8vIGl0IGNvdWxkIGJlIGFsc28gbWFkZSB3aXRoIG1ldGhvZCArIGNyZWF0ZWQgKGxpZmUgY3ljbGUgaG9vaykKICAgICAgICAgICAgICAvLyBidXQgdGhpcyB3b3JrcyBiZXR0ZXIgd2l0aCBoZWF2eSBmaWxlcyAoaW1hZ2VzKQogICAgICAgICAgICAgIGVuZHBvaW50ID0gIi9hcGkvcmV2aWV3cy8iLmNvbmNhdCh0by5wYXJhbXMuaWQsICIvIik7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGFwaVNlcnZpY2UoZW5kcG9pbnQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgIC8vIGdldCBhbGwgdGhlIHByZXZpb3VzRGF0YQogICAgICAgICAgICAgICAgdG8ucGFyYW1zLnByZXZpb3VzUmV2aWV3Qm9keSA9IGRhdGEuYm9keTsKICAgICAgICAgICAgICAgIHRvLnBhcmFtcy5wcmV2aW91c1Jldmlld1JhdGluZyA9IGRhdGEucmF0aW5nOwogICAgICAgICAgICAgICAgdG8ucGFyYW1zLmV2ZW50U2x1ZyA9IGRhdGEuZXZlbnRfc2x1ZzsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJldmlld0JvZHk6IHRoaXMucHJldmlvdXNSZXZpZXdCb2R5LAogICAgICAvL3JldHVybiB0aGUgbW9kaWZpZWQgcmV2aWV3CiAgICAgIHJldmlld1JhdGluZzogdGhpcy5wcmV2aW91c1Jldmlld1JhdGluZywKICAgICAgZXJyb3I6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBpZiB0aGUgZmllbGQgY29udGFpbnMgc29tZXRoaW5nCiAgICAgIGlmICh0aGlzLnJldmlld0JvZHkpIHsKICAgICAgICB2YXIgZW5kcG9pbnQgPSAiL2FwaS9yZXZpZXdzLyIuY29uY2F0KHRoaXMuaWQsICIvIik7CiAgICAgICAgYXBpU2VydmljZShlbmRwb2ludCwgIlBVVCIsIHsKICAgICAgICAgIGJvZHk6IHRoaXMucmV2aWV3Qm9keSwKICAgICAgICAgIHJhdGluZzogdGhpcy5yZXZpZXdSYXRpbmcKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICJldmVudCIsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHNsdWc6IF90aGlzLmV2ZW50U2x1ZwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVycm9yID0gIklsIGNhbXBvIFJlY2Vuc2lvbmUgbm9uIHB1w7IgZXNzZXJlIHZ1b3RvISI7CiAgICAgIH0KICAgIH0KICB9IC8vIG1ldGhvZHM6IHsKICAvLyAgICAgYXN5bmMgZ2V0UmV2aWV3RGF0YSgpIHsKICAvLyAgICAgICAgIGxldCBlbmRwb2ludCA9IGAvYXBpL3Jldmlld3MvJHt0aGlzLmlkfS9gOwogIC8vICAgICAgICAgYXdhaXQgYXBpU2VydmljZShlbmRwb2ludCkKICAvLyAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgLy8gICAgICAgICAgICAgICAgICAgICB0aGlzLnJldmlld0JvZHkgPSBkYXRhLmJvZHk7CiAgLy8gICAgICAgICAgICAgICAgIH0pCiAgLy8gICAgIH0KICAvLyB9LAogIC8vIGNyZWF0ZWQoKSB7CiAgLy8gICAgIHRoaXMuZ2V0UmV2aWV3RGF0YSgpOwogIC8vIH0KCn07"},{"version":3,"sources":["ReviewEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,SAAA,UAAA,QAAA,uBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KALA;AASA;AACA,IAAA,kBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAVA;AAcA,IAAA,oBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AAdA,GAHA;AAuBA,EAAA,gBAvBA,4BAuBA,EAvBA,EAuBA,IAvBA,EAuBA,IAvBA,EAuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,cAAA,QAJA,0BAIA,EAAA,CAAA,MAAA,CAAA,EAJA;AAAA;AAAA,qBAKA,UAAA,CAAA,QAAA,CAAA,CAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA;AACA,gBAAA,EAAA,CAAA,MAAA,CAAA,kBAAA,GAAA,IAAA,CAAA,IAAA;AACA,gBAAA,EAAA,CAAA,MAAA,CAAA,oBAAA,GAAA,IAAA,CAAA,MAAA;AACA,gBAAA,EAAA,CAAA,MAAA,CAAA,SAAA,GAAA,IAAA,CAAA,UAAA;AACA,eALA,CALA;;AAAA;AAAA,+CAWA,IAAA,EAXA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA,GAnCA;AAqCA,EAAA,IArCA,kBAqCA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KAAA,kBADA;AACA;AACA,MAAA,YAAA,EAAA,KAAA,oBAFA;AAGA,MAAA,KAAA,EAAA;AAHA,KAAA;AAKA,GA3CA;AA4CA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA;AACA,UAAA,KAAA,UAAA,EAAA;AACA,YAAA,QAAA,0BAAA,KAAA,EAAA,MAAA;AACA,QAAA,UAAA,CAAA,QAAA,EAAA,KAAA,EAAA;AACA,UAAA,IAAA,EAAA,KAAA,UADA;AAEA,UAAA,MAAA,EAAA,KAAA;AAFA,SAAA,CAAA,CAGA,IAHA,CAGA,YAAA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA,OADA;AAEA,YAAA,MAAA,EAAA;AAAA,cAAA,IAAA,EAAA,KAAA,CAAA;AAAA;AAFA,WAAA;AAIA,SARA;AASA,OAXA,MAWA;AACA,aAAA,KAAA,GAAA,2CAAA;AACA;AACA;AAjBA,GA5CA,CA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA1EA,CAAA","sourcesContent":["<!------------------ Single Review: Modify form ----------------------------->\n<!------------------ methods: beforeRouteEnter data(), onSubmit()----------->\n\n<template lang=\"html\">\n  <div class=\"container mt-2\">\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <h1 class=\"mb-3\">Modifica la tua recensione</h1>\n        <form @submit.prevent=\"onSubmit\">\n          <!--textarea with previous Review-->\n          <textarea v-model=\"reviewBody\" class=\"form-control\" rows=\"3\">\n          </textarea>\n          <!--rating-->\n          <br />\n          <button class=\"btn btn-success\" type=\"submit\">\n            Pubblica la Recensione\n          </button>\n        </form>\n        <p class=\"error mt-2\">{{ error }}</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { apiService } from \"../common/api.service\";\n\nexport default {\n  name: \"ReviewEditor\",\n\n  props: {\n    id: {\n      type: Number,\n      required: true\n    },\n    eventSlug: {\n      type: String,\n      required: true\n    },\n    // fields autofilled beforeRouteEnter\n    previousReviewBody: {\n      type: String,\n      required: true\n    },\n    previousReviewRating: {\n      type: Number,\n      required: true\n    }\n  },\n\n  async beforeRouteEnter(to, from, next) {\n    // get previousReviewBody(${to.params.id})\n    // it could be also made with method + created (life cycle hook)\n    // but this works better with heavy files (images)\n    let endpoint = `/api/reviews/${to.params.id}/`;\n    await apiService(endpoint).then(data => {\n      // get all the previousData\n      to.params.previousReviewBody = data.body;\n      to.params.previousReviewRating = data.rating;\n      to.params.eventSlug = data.event_slug;\n    });\n    return next();\n  },\n\n  data() {\n    return {\n      reviewBody: this.previousReviewBody, //return the modified review\n      reviewRating: this.previousReviewRating,\n      error: null\n    };\n  },\n  methods: {\n    onSubmit() {\n      // if the field contains something\n      if (this.reviewBody) {\n        let endpoint = `/api/reviews/${this.id}/`;\n        apiService(endpoint, \"PUT\", {\n          body: this.reviewBody,\n          rating: this.reviewRating\n        }).then(() => {\n          this.$router.push({\n            name: \"event\",\n            params: { slug: this.eventSlug }\n          });\n        });\n      } else {\n        this.error = \"Il campo Recensione non puÃ² essere vuoto!\";\n      }\n    }\n  }\n  // methods: {\n  //     async getReviewData() {\n  //         let endpoint = `/api/reviews/${this.id}/`;\n  //         await apiService(endpoint)\n  //                 .then(data => {\n  //                     this.reviewBody = data.body;\n  //                 })\n  //     }\n  // },\n  // created() {\n  //     this.getReviewData();\n  // }\n};\n</script>\n"],"sourceRoot":"src/components"}]}